(this.webpackJsonprpggame=this.webpackJsonprpggame||[]).push([[0],{47:function(e,i,t){},48:function(e,i,t){},50:function(e,i,t){},53:function(e,i,t){"use strict";t.r(i);var n=t(21),s=t.n(n),a=t(37),r=t.n(a),c=(t(47),t(48),t(35)),o=t.n(c),h=t(38),d=t(16),u=t(17),_=t(42),p=t(41),l=(t(50),t(9)),f=t(39),v=t.p+"static/media/warrior.64dc15a5.png",g=t.p+"static/media/rogue.bfde2bce.png",m=t.p+"static/media/cleric.f639598e.png",w=t(40),b=t.n(w),k=2,y=3,j=4,x=5,O=1,T=510,P=40,R=function(){function e(i,t,n,s,a){Object(d.a)(this,e),this._grid=void 0,this._noiseGen=void 0,this._length=void 0,this._width=void 0,this._moveValidator=void 0,this._actors=void 0,this._grid=[[]],this._length=i,this._width=i,this._noiseGen=new b.a,this._moveValidator=t,this._actors=null!==n&&void 0!==n?n:[]}return Object(u.a)(e,[{key:"updateGrid",value:function(){throw new Error("Method not implemented.")}},{key:"_generate",value:function(e,i){return this._noiseGen.noise2D(e,i)/2+.5}},{key:"getGrid",value:function(){return this._grid}},{key:"getType",value:function(e,i){return(this._grid[e][i]&T)>>1}},{key:"isOccupied",value:function(e,i){return 1===(this._grid[e][i]&O)}},{key:"init",value:function(){for(var e=0;e<this._length;e++){this._grid[e]=[];for(var i=0;i<this._width;i++){var t=e/this._width-.5,n=i/this._length-.5;this._assignType(e,i,this._generate(t,n))}}}},{key:"_assignType",value:function(e,i,t){var n=0;t<.2?n=k:t<.3?n=j:t<.4?n=y:t<1&&(n=x),this._grid[e][i]=n<<1}},{key:"grid",get:function(){return this._grid}},{key:"isValidMove",value:function(e,i){return!0}}]),e}(),C=t.p+"static/media/savanna_dry_d.9bef9f29.jpg",M=t.p+"static/media/savanna_dry_n.7b994994.jpg",G=t.p+"static/media/ground_mud_d.c541fd50.jpg",I=t.p+"static/media/snow2_d.3ca6e495.jpg",B=t.p+"static/media/snow2_n.772c4e7f.jpg",L=t.p+"static/media/ground_mud_n.27ffb444.jpg",S=t.p+"static/media/brushwalker218.86327b2f.png",z=t.p+"static/media/arch3_bk.8f8ab086.png",E=t.p+"static/media/arch3_dn.f8f7fec7.png",F=t.p+"static/media/arch3_ft.05141b55.png",A=t.p+"static/media/arch3_lf.12f9f372.png",D=t.p+"static/media/arch3_rt.c83185a2.png",V=t.p+"static/media/arch3_up.cf10ede6.png",N=function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,[{key:"validateMove",value:function(e,i){throw new Error("Method not implemented.")}}]),e}(),J=function(){function e(i,t,n,s,a){Object(d.a)(this,e),this._scene=void 0,this._height=void 0,this._width=void 0,this._canvas=void 0,this._maxRadius=void 0,this._minRadius=void 0,this._enviormentGrid=void 0,this._scene=i,this._height=n,this._width=n,this._canvas=t,this._maxRadius=null!==s&&void 0!==s?s:40,this._minRadius=null!==a&&void 0!==a?a:10,this._enviormentGrid=new R(n,new N)}return Object(u.a)(e,[{key:"_init",value:function(){for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++)this._addMesh(e,i,0)}},{key:"_addMesh",value:function(e,i,t){var n=l.f.CreateBox("box"+e+" : "+i,{size:1},this._scene);n.position=new l.m(-1*(this._width/2-e),0,-1*(this._height/2-i));var s=new l.k("texture",this._scene);this._enviormentGrid.getType(e,i)===k?(s.diffuseTexture=new l.l(C,this._scene),s.bumpTexture=new l.l(M,this._scene)):this._enviormentGrid.getType(e,i)===j?(s.diffuseTexture=new l.l(I,this._scene),s.bumpTexture=new l.l(B,this._scene)):this._enviormentGrid.getType(e,i)===y?(s.diffuseTexture=new l.l(G,this._scene),s.bumpTexture=new l.l(L,this._scene)):this._enviormentGrid.getType(e,i)===x&&(s.diffuseTexture=new l.l(S,this._scene)),n.material=s}},{key:"_makeSkyBox",value:function(e){var i=l.f.CreateBox("skybox",{size:100},this._scene),t=new l.k("skybox",this._scene);t.backFaceCulling=!1,t.reflectionTexture=new l.c("",this._scene,["_bk.png","_dn.png","_ft.png","_lf.png","_rt.png","_up.png"],!1,[z,E,F,A,D,V]),t.diffuseColor=new l.b(0,0,0),t.specularColor=new l.b(0,0,0),i.material=t,console.log(i)}},{key:"init",value:function(){this._enviormentGrid.init(),this._init();var e=new l.a("Camera",Math.PI/2,Math.PI/2,2,l.m.Zero(),this._scene);new l.e("Light1",new l.m(1,1,0),this._scene);this._makeSkyBox(this._scene),e.upperBetaLimit=Math.PI/2.2,e.lowerBetaLimit=0,e.lowerRadiusLimit=this._minRadius,e.upperRadiusLimit=this._maxRadius,e.attachControl(this._canvas,!0)}}]),e}(),U=function(){function e(i){var t=this;Object(d.a)(this,e),this._scene=void 0,this._engine=void 0,this._cancas=void 0,this._cancas=i,this._engine=new l.d(i),this._scene=new l.h(this._engine),this._scene.onPointerObservable.add((function(e){if(e.type===l.g.POINTERPICK&&console.log("picked"),e.type===l.g.POINTERDOWN){var i=t._scene.pickSprite(t._scene.pointerX,t._scene.pointerY);null!=i&&i.hit&&null!=i.pickedSprite&&(console.log("sprite picked"),t.displayValidMoves(i))}}))}return Object(u.a)(e,[{key:"displayValidMoves",value:function(e){if(null!=e.pickedSprite){var i=l.f.CreateBox("mesh",{size:1},this._scene);i.position=new l.m(e.pickedSprite.position.x+1,1,0),i.isPickable=!0;var t=new l.k("mats",this._scene);t.alpha=.5,t.diffuseColor=new l.b(0,0,255),i.material=t}}},{key:"show",value:function(){var e=this;new J(this._scene,this._cancas,P).init();f.AdvancedDynamicTexture.CreateFullscreenUI("myUI",!0,this._scene);var i=new l.j("playerSprite",v,1,{width:32,height:32},this._scene),t=new l.j("rouge",g,1,{width:32,height:32},this._scene),n=new l.j("cleric",m,1,{width:32,height:32},this._scene);i.isPickable=!0,t.isPickable=!0,n.isPickable=!0;var s=new l.i("player",i);s.isPickable=!0;var a=new l.i("rougesprite",t),r=new l.i("rouges",n);a.isPickable=!0,r.isPickable=!0,s.playAnimation(21,30,!0,120),a.playAnimation(21,30,!0,120),r.playAnimation(21,30,!0,120),s.position=new l.m(2,1,0),a.position=new l.m(1,1,0),r.position=new l.m(3,1,0),this._engine.runRenderLoop((function(){e._scene.render()})),window.addEventListener("resize",(function(){e._engine.resize(),console.log("window resized")}))}}]),e}(),K=t(20),W=function(e){Object(_.a)(t,e);var i=Object(p.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=i.call(this,e))._canvasRef=void 0,n._canvasRef=s.a.createRef(),n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new U(this._canvasRef).show();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(K.jsx)("div",{children:Object(K.jsx)("canvas",{id:"game-host",ref:function(i){e._canvasRef=i}})})}}]),t}(s.a.Component);var X=function(){return Object(K.jsx)("div",{className:"App",children:Object(K.jsx)(W,{})})},Y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,54)).then((function(i){var t=i.getCLS,n=i.getFID,s=i.getFCP,a=i.getLCP,r=i.getTTFB;t(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(K.jsx)(s.a.StrictMode,{children:Object(K.jsx)(X,{})}),document.getElementById("root")),Y()}},[[53,1,2]]]);
//# sourceMappingURL=main.2db7e546.chunk.js.map