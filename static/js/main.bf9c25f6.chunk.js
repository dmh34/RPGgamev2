(this.webpackJsonprpggame=this.webpackJsonprpggame||[]).push([[0],{47:function(e,i,t){},48:function(e,i,t){},50:function(e,i,t){},53:function(e,i,t){"use strict";t.r(i);var n=t(21),s=t.n(n),a=t(37),r=t.n(a),o=(t(47),t(48),t(35)),c=t.n(o),h=t(38),d=t(16),_=t(17),u=t(42),p=t(41),v=(t(50),t(11)),l=t(39),f=t.p+"static/media/warrior.64dc15a5.png",g=t(40),m=t.n(g),w=2,k=3,b=4,y=5,x=1,j=510,O=40,M=function(){function e(i,t,n,s,a){Object(d.a)(this,e),this._grid=void 0,this._noiseGen=void 0,this._length=void 0,this._width=void 0,this._moveValidator=void 0,this._actors=void 0,this._grid=[[]],this._length=i,this._width=i,this._noiseGen=new m.a,this._moveValidator=t,this._actors=null!==n&&void 0!==n?n:[]}return Object(_.a)(e,[{key:"updateGrid",value:function(e,i){var t=i/2-e.getPosition().x,n=i/2-e.getPosition().y;this._grid[t][n]=1|this._grid[t][n]}},{key:"_generate",value:function(e,i){return this._noiseGen.noise2D(e,i)/2+.5}},{key:"getGrid",value:function(){return this._grid}},{key:"getType",value:function(e,i){return(this._grid[e][i]&j)>>1}},{key:"isOccupied",value:function(e,i){return 1===(this._grid[e][i]&x)}},{key:"init",value:function(){for(var e=0;e<this._length;e++){this._grid[e]=[];for(var i=0;i<this._width;i++){var t=e/this._width-.5,n=i/this._length-.5;this._assignType(e,i,this._generate(t,n))}}}},{key:"_assignType",value:function(e,i,t){var n=0;t<.2?n=w:t<.3?n=b:t<.4?n=k:t<1&&(n=y),this._grid[e][i]=n<<1}},{key:"grid",get:function(){return this._grid}},{key:"isValidMove",value:function(e,i){return!0}}]),e}(),T=t.p+"static/media/savanna_dry_d.9bef9f29.jpg",R=t.p+"static/media/savanna_dry_n.7b994994.jpg",C=t.p+"static/media/ground_mud_d.c541fd50.jpg",P=t.p+"static/media/snow2_d.3ca6e495.jpg",S=t.p+"static/media/snow2_n.772c4e7f.jpg",G=t.p+"static/media/ground_mud_n.27ffb444.jpg",z=t.p+"static/media/brushwalker218.86327b2f.png",A=t.p+"static/media/arch3_bk.8f8ab086.png",B=t.p+"static/media/arch3_dn.f8f7fec7.png",L=t.p+"static/media/arch3_ft.05141b55.png",I=t.p+"static/media/arch3_lf.12f9f372.png",F=t.p+"static/media/arch3_rt.c83185a2.png",V=t.p+"static/media/arch3_up.cf10ede6.png",D=function(){function e(){Object(d.a)(this,e)}return Object(_.a)(e,[{key:"validateMove",value:function(e,i){throw new Error("Method not implemented.")}}]),e}(),E=function(){function e(i,t,n,s,a){Object(d.a)(this,e),this._scene=void 0,this._height=void 0,this._width=void 0,this._canvas=void 0,this._maxRadius=void 0,this._minRadius=void 0,this._enviormentGrid=void 0,this._scene=i,this._height=n,this._width=n,this._canvas=t,this._maxRadius=null!==s&&void 0!==s?s:40,this._minRadius=null!==a&&void 0!==a?a:10,this._enviormentGrid=new M(n,new D)}return Object(_.a)(e,[{key:"_init",value:function(){for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++)this._addMesh(e,i,0)}},{key:"_addMesh",value:function(e,i,t){var n=v.f.CreateBox("box"+e+" : "+i,{size:1},this._scene);n.position=new v.m(-1*(this._width/2-e),0,-1*(this._height/2-i));var s=new v.k("texture",this._scene);this._enviormentGrid.getType(e,i)===w?(s.diffuseTexture=new v.l(T,this._scene),s.bumpTexture=new v.l(R,this._scene)):this._enviormentGrid.getType(e,i)===b?(s.diffuseTexture=new v.l(P,this._scene),s.bumpTexture=new v.l(S,this._scene)):this._enviormentGrid.getType(e,i)===k?(s.diffuseTexture=new v.l(C,this._scene),s.bumpTexture=new v.l(G,this._scene)):this._enviormentGrid.getType(e,i)===y&&(s.diffuseTexture=new v.l(z,this._scene)),n.material=s}},{key:"_makeSkyBox",value:function(e){var i=v.f.CreateBox("skybox",{size:100},this._scene),t=new v.k("skybox",this._scene);t.backFaceCulling=!1,t.reflectionTexture=new v.c("",this._scene,["_bk.png","_dn.png","_ft.png","_lf.png","_rt.png","_up.png"],!1,[A,B,L,I,F,V]),t.diffuseColor=new v.b(0,0,0),t.specularColor=new v.b(0,0,0),i.material=t}},{key:"init",value:function(){this._enviormentGrid.init(),this._init();var e=new v.a("Camera",Math.PI/2,Math.PI/2,2,v.m.Zero(),this._scene);new v.e("Light1",new v.m(1,1,0),this._scene);this._makeSkyBox(this._scene),e.upperBetaLimit=Math.PI/2.2,e.lowerBetaLimit=0,e.lowerRadiusLimit=this._minRadius,e.upperRadiusLimit=this._maxRadius,e.attachControl(this._canvas,!0)}}]),e}(),N=function(){function e(i,t,n,s,a,r){Object(d.a)(this,e),this._currentSprite=void 0,this._position=void 0,this._sprite=void 0,this._spriteManager=void 0,this._scene=void 0,this._actorAttributes=void 0,this._scene=s,this._actorAttributes=i,this._position=new v.m(t.x,t.y,t.z),this._currentSprite=n,this._spriteManager=new v.j("sprite1",this._currentSprite,1,{width:32,height:32},this._scene),this._sprite=new v.i("sprite",this._spriteManager),this._sprite.position=this._position,r&&(this._sprite.playAnimation(21,30,!0,120),this._sprite.isVisible=!0),a&&(this._sprite.isPickable=a,this._spriteManager.isPickable=a),console.log(this._position)}return Object(_.a)(e,[{key:"getPosition",value:function(){return this._position}},{key:"move",value:function(e){this._position=e,console.log(this._position)}},{key:"actorAttributes",get:function(){return this._actorAttributes},set:function(e){this._actorAttributes=e}}]),e}(),J=function(){function e(i){var t=this;Object(d.a)(this,e),this._scene=void 0,this._engine=void 0,this._canvas=void 0,this._lastpicked=void 0,this._moves=void 0,this._canvas=i,this._engine=new v.d(i),this._scene=new v.h(this._engine),this._moves=[],this._scene.onPointerObservable.add((function(e){if(e.type===v.g.POINTERDOWN){var i,n=t._scene.pick(t._scene.pointerX,t._scene.pointerY);if("mesh"===(null===n||void 0===n||null===(i=n.pickedMesh)||void 0===i?void 0:i.name)){console.log(null===n||void 0===n?void 0:n.pickedMesh.position),t._lastpicked.pickedSprite.position.set(n.pickedMesh.position.x,n.pickedMesh.position.y,n.pickedMesh.position.z);for(var s=0;s<5;s++)for(var a=0;a<5;a++)t._moves[s][a].dispose();return void console.log("removing move meshes")}var r=t._scene.pickSprite(t._scene.pointerX,t._scene.pointerY);null!=r&&r.hit&&null!=r.pickedSprite&&(t._lastpicked=r,t.displayValidMoves(r))}}))}return Object(_.a)(e,[{key:"displayValidMoves",value:function(e){if(null!=e.pickedSprite)for(var i=0;i<5;i++){this._moves[i]=[];for(var t=0;t<5;t++){var n=v.f.CreateBox("mesh",{size:1},this._scene);n.position=new v.m(-1*(Math.floor(2.5)-e.pickedSprite.position.x)+i,1,-1*(Math.floor(2.5)-e.pickedSprite.position.z)+t),n.isPickable=!0;var s=new v.k("mats",this._scene);s.alpha=.5,s.diffuseColor=new v.b(0,0,255),n.material=s,this._moves[i][t]=n}}}},{key:"show",value:function(){var e=this;new E(this._scene,this._canvas,O).init();l.AdvancedDynamicTexture.CreateFullscreenUI("myUI",!0,this._scene),new N({agility:3,defense:3,vitiality:3,strength:3,dexterity:3,charisma:3,mana:3,speed:3,isAlive:!0},{x:3,y:1,z:0},f,this._scene,!0,!0),new N({agility:3,defense:3,vitiality:3,strength:3,dexterity:3,charisma:3,mana:3,speed:3,isAlive:!0},{x:4,y:1,z:0},f,this._scene,!0,!0);this._engine.runRenderLoop((function(){e._scene.render()})),window.addEventListener("resize",(function(){e._engine.resize(),console.log("window resized")}))}}]),e}(),U=t(20),X=function(e){Object(u.a)(t,e);var i=Object(p.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=i.call(this,e))._canvasRef=void 0,n._canvasRef=s.a.createRef(),n}return Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new J(this._canvasRef).show();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(U.jsx)("div",{children:Object(U.jsx)("canvas",{id:"game-host",ref:function(i){e._canvasRef=i}})})}}]),t}(s.a.Component);var Y=function(){return Object(U.jsx)("div",{className:"App",children:Object(U.jsx)(X,{})})},W=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,54)).then((function(i){var t=i.getCLS,n=i.getFID,s=i.getFCP,a=i.getLCP,r=i.getTTFB;t(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(U.jsx)(s.a.StrictMode,{children:Object(U.jsx)(Y,{})}),document.getElementById("root")),W()}},[[53,1,2]]]);
//# sourceMappingURL=main.bf9c25f6.chunk.js.map